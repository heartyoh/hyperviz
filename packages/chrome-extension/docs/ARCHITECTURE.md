# HyperViz 크롬 확장 프로그램 아키텍처

이 문서는 HyperViz 크롬 확장 프로그램의 전체적인 아키텍처를 설명합니다.

## 목차

1. [개요](#개요)
2. [주요 구성 요소](#주요-구성-요소)
3. [모듈 시스템](#모듈-시스템)
4. [통신 흐름](#통신-흐름)
5. [데이터 관리](#데이터-관리)
6. [UI 구성](#ui-구성)
7. [보안 고려사항](#보안-고려사항)

## 개요

HyperViz 크롬 확장 프로그램은 모듈식 아키텍처를 채택하여 다양한 기능을 유연하게 통합할 수 있도록 설계되었습니다. 기본 프레임워크는 다음과 같은 주요 목표를 달성하도록 구축되었습니다:

- **모듈성**: 새로운 기능을 쉽게 추가하고 기존 기능을 수정할 수 있는 구조
- **성능**: 백그라운드와 UI 요소 간의 효율적인 통신
- **확장성**: 향후 기능 확장에 대비한 설계
- **견고성**: 오류에 강한 아키텍처

## 주요 구성 요소

HyperViz 크롬 확장 프로그램은 다음과 같은 주요 구성 요소로 이루어져 있습니다:

### 1. 코어 프레임워크

- **모듈 레지스트리**: 모듈 등록 및 관리
- **메시징 시스템**: 모듈 간 통신 및 백그라운드-UI 통신
- **스토리지 관리**: 설정 및 데이터 저장소
- **이벤트 시스템**: 이벤트 기반 아키텍처

### 2. 백그라운드 서비스

- **서비스 워커**: 확장 프로그램의 백그라운드 프로세스
- **모듈 관리자**: 모듈 수명 주기 관리
- **통신 중개자**: 모듈 간 통신 및 외부 통신 중재

### 3. 콘텐츠 스크립트

- **웹페이지 인터랙션**: 웹페이지와의 상호작용
- **데이터 수집기**: 웹페이지에서 데이터 수집

### 4. 팝업 UI

- **모듈 UI 컴포넌트**: 각 모듈별 사용자 인터페이스
- **모듈 선택기**: 사용자가 원하는 모듈을 선택할 수 있는 인터페이스
- **공통 UI 컴포넌트**: 공통으로 사용되는 UI 요소

## 모듈 시스템

HyperViz 크롬 확장 프로그램의 핵심은 모듈 시스템입니다. 각 모듈은 다음 요소로 구성됩니다:

### 모듈 구조

```
modules/
├── module-name/
│   ├── manifest.json       # 모듈 정의
│   ├── background/         # 백그라운드 로직
│   ├── content/            # 콘텐츠 스크립트
│   ├── components/         # UI 컴포넌트
│   └── utils/              # 유틸리티 함수
```

### 모듈 수명 주기

1. **등록**: 확장 프로그램 시작 시 모듈 등록
2. **초기화**: 모듈 활성화 시 초기화
3. **실행**: 모듈 기능 실행
4. **비활성화**: 모듈 비활성화
5. **정리**: 확장 프로그램 종료 시 정리

## 통신 흐름

HyperViz 크롬 확장 프로그램은 다양한 컨텍스트 간의 통신을 관리합니다:

### 1. 모듈 간 통신

- 모듈 레지스트리를 통한 직접 참조
- 메시징 시스템을 통한 간접 통신
- 이벤트 시스템을 통한 느슨한 결합

### 2. 백그라운드-UI 통신

- Chrome 메시징 API 활용
- 비동기 메시지 처리

### 3. 콘텐츠 스크립트 통신

- 웹페이지와 백그라운드 간 통신
- 보안 경계 관리

## 데이터 관리

### 1. 스토리지 계층

- **로컬 스토리지**: 설정 및 캐시 데이터
- **세션 스토리지**: 임시 데이터
- **IndexedDB**: 대용량 데이터 저장

### 2. 데이터 흐름

- 데이터 수집 (콘텐츠 스크립트)
- 데이터 처리 (백그라운드 서비스)
- 데이터 표시 (UI 컴포넌트)

## UI 구성

HyperViz 크롬 확장 프로그램의 UI는 다음과 같이 구성됩니다:

### 1. 팝업 UI

- 모듈 선택기 (탭 또는 드롭다운)
- 모듈별 UI 컴포넌트
- 공통 헤더 및 푸터

### 2. 옵션 페이지

- 전역 설정
- 모듈별 설정
- 사용자 프로필 관리

### 3. 콘텐츠 UI 오버레이

- 웹페이지 위에 표시되는 오버레이
- 컨텍스트 메뉴 확장

## 보안 고려사항

HyperViz 크롬 확장 프로그램은 다음과 같은 보안 사항을 고려합니다:

### 1. 권한 관리

- 최소 권한 원칙 적용
- 필요한 권한만 요청

### 2. 데이터 보안

- 민감한 데이터 암호화
- 세션 데이터 적절한 처리

### 3. 코드 분리

- 콘텐츠 스크립트와 백그라운드 로직 분리
- 안전한 통신 채널 사용

---

## 기술 스택

- **TypeScript**: 타입 안전성과 개발 효율성
- **Preact**: 가벼운 UI 라이브러리
- **SCSS**: 스타일링
- **Webpack**: 모듈 번들링
- **Jest**: 테스트

---

HyperViz 크롬 확장 프로그램의 아키텍처는 지속적으로 발전하고 있으며, 이 문서는 정기적으로 업데이트됩니다.
